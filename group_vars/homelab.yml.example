---
# Homelab Configuration
# SSH key for all homelab hosts
sysadmin_ssh_key: "{{ lookup('file', playbook_dir + '/credentials/ssh_keys/sysadmin_homelab.pub') }}"

# Base domain for all services (change this to your domain)
base_domain: example.com

# Nginx Configuration for public-facing servers
ssl_enabled: true
cloudflare_enabled: true      # Set to false if not using Cloudflare
domain_name: "{{ base_domain }}"
cloudflare_api_token: "yourkeyhere"
certbot_email: "admin@example.com"

# Nginx virtual hosts to configure
# Each entry corresponds to a template file: templates/<name>.conf.j2
nginx_vhosts:
  - search
  - forgejo
  - base_domain
  - sharkey
  - filescdn
#  - gitlab

# Service port mappings (ports exposed by each service)
# Adjust these if your services use different ports
service_ports:
  search: 8080       # SearXNG default port
  gitlab: 80         # GitLab HTTP port
  sharkey: 3000      # Sharkey/Misskey default port
  filescdn: 8080     # File CDN service port
  forgejo: 3000     # Forgejo default port

# Services configuration
# These use hostvars to automatically pull backend IPs from inventory/hosts.yml
# gitlab commented out, if you want to use it then uncomment it then comment out forgejo
services:
  search:
    domain: "search.{{ base_domain }}"
    backend_server: "http://{{ hostvars['searxng']['ansible_host'] }}:{{ service_ports.search }}"
#  gitlab:
#    domain: "git.{{ base_domain }}"
#    backend_server: "http://{{ hostvars['gitlab']['ansible_host'] }}:{{ service_ports.gitlab }}"
  sharkey:
    domain: "fedi.{{ base_domain }}"
    backend_server: "http://{{ hostvars['sharkey']['ansible_host'] }}:{{ service_ports.sharkey }}"
  filescdn:
    domain: "cdn.{{ base_domain }}"
    backend_server: "http://{{ hostvars['filescdn']['ansible_host'] }}:{{ service_ports.filescdn }}"
  forgejo:
    domain: "git.{{ base_domain }}"
    backend_server: "http://{{ hostvars['forgejo']['ansible_host'] }}:{{ service_ports.forgejo }}"

# Service base URLs (used by various roles)
searxng_base_url: "https://search.{{ base_domain }}"
sharkey_base_url: "https://fedi.{{ base_domain }}"

# GitLab configuration (homelab specific)
gitlab_force_restore: false
gitlab_force_fresh_install: false

# Forgejo-specific settings (optional)
forgejo_force_restore: false
forgejo_force_fresh_install: false

# monitoring - observability role with prometheus and grafana
monitoring_force_fresh_install: false

# immich backup restoration settings, set to true to force a fresh install
immich_force_restore: false

# NAS IP address (adjust to your network)
nas_ip: "x.x.x.x"

# Static website configuration
# make a public repo with index.html, styles.css, script.js and so on and replace the placeholders below
static_website:
  enabled: true
  repo_url: "https://github.com/yourusername/yourwebsite.git"
  repo_branch: "main"
  local_path: "/srv/nginx/{{ base_domain }}"
  github_api_url: "https://api.github.com/repos/yourusername/yourwebsite/commits/main"
